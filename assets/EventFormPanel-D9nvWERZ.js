import{j as e,B as m,m as q,aH as F,I as B,aI as N,q as O,G as b,P as D,aJ as a,d as s,X as n,A as H,e as z}from"./vendor-ui-ifLq-YzB.js";import{u as K}from"./index-C8OFIz03.js";import{u as y,g as $}from"./getStringOfDay-DeMENUBZ.js";import{L as f,u as J}from"./vendor-react-Bmf8nP68.js";function Q({children:r}){const{date:l}=y();return e.jsxs(m,{component:"section",children:[e.jsxs(m,{component:"nav",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(q,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(F,{fontSize:"small"}),$(l)]}),e.jsx(B,{component:f,to:"/area-personale","aria-label":"Chiudi",color:"error",children:e.jsx(N,{})})]}),r]})}function w(){const r=[];for(let l=0;l<24;l++)for(let o of[0,30]){const h=l.toString().padStart(2,"0"),u=o.toString().padStart(2,"0");r.push(`${h}:${u}:00`)}return r}function I(r){return r.slice(0,5)}function _(){const{submitWorkLog:r,isLoading:l,error:o}=K(),{date:h,worksite:u,setWorksite:P,task:p,setTask:T,startTime:d,setStartTime:W,endTime:g,setEndTime:M,totalHours:k,km:j,setKm:A,notes:v,setNotes:L,editingRow:S,cancelEditing:E}=y(),C=O(),R=b(C.breakpoints.down("md")),i=b(C.breakpoints.down("sm")),G=J(),c=d||"06:00:00";function V(t){t.preventDefault(),r({date:h,worksite:u,task:p,startTime:d,endTime:g,totalHours:k,km:j,notes:v,editingRow:S}),G("/area-personale"),E()}return e.jsxs(e.Fragment,{children:[e.jsx(m,{sx:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"#0000009a",alignContent:"center",zIndex:10},component:f,to:"/area-personale"}),e.jsxs(D,{sx:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%,-50%)",margin:"0 auto",p:i?2:3,maxWidth:700,width:R?"95%":"100%",zIndex:100},children:[e.jsx(Q,{}),e.jsx("form",{onSubmit:V,children:e.jsxs(a,{container:!0,spacing:i?2:3,children:[e.jsxs(a,{container:!0,width:"100%",children:[e.jsx(a,{item:!0,width:i?"100%":200,children:e.jsxs(s,{fullWidth:!0,select:!0,label:"Cantiere",value:u,onChange:t=>P(t.target.value),required:!0,children:[e.jsx(n,{value:"",children:"Seleziona Cantiere"}),["Rivazzurra","San Giuliano","Viserba","Torre Pedrera","Miramare Naturale","Spadarolo","Miramare Sintetico","Ina Casa","Viserbella","San Vito","CorpolÃ²","Rivabella","Palazzetto","Stadio","Varie + Gestione","Altri Impianti + Extra","Servizi a Pagamento","Sede Coop134"].map(t=>e.jsx(n,{value:t,children:t},t))]})}),e.jsx(a,{item:!0,flex:i&&1,width:i?"100%":200,children:e.jsxs(s,{fullWidth:!0,select:!0,label:"Lavoro",value:p,onChange:t=>T(t.target.value),required:!0,children:[e.jsx(n,{value:"",children:"Seleziona Lavoro"}),["Custodia","Pulizia Spogliatoi","Custodia Partita","Pulizia Altro","Innaffiatura","Rigatura","Rigatura Extra","Sfalcio CP","Sfalcio CP+CS","Sfalcio CS","Sfalcio AE","Sfalcio Generale","Sabbia","Rullatura","Giri Vari","Lavoro PC","Altre Manutenzioni","Sanificazione","Miglioria","Lavoro a Preventivo:","Corso","Visita Medica","Riunione"].map(t=>e.jsx(n,{value:t,children:t},t))]})})]}),e.jsxs(a,{container:!0,sx:{width:"100%"},children:[e.jsx(a,{item:!0,flex:i&&1,width:150,children:e.jsxs(s,{fullWidth:!0,select:!0,label:"Orario Inizio",value:d,onChange:t=>W(t.target.value),required:!0,children:[e.jsx(n,{value:"",children:"Seleziona Inizio"}),w().sort((t,x)=>(t<c?1:0)-(x<c?1:0)).map(t=>e.jsx(n,{value:t,children:I(t)},t))]})}),e.jsx(a,{item:!0,flex:i&&1,width:150,children:e.jsxs(s,{fullWidth:!0,select:!0,label:"Orario Fine",value:g,onChange:t=>M(t.target.value),required:!0,children:[e.jsx(n,{value:"",children:"Seleziona Fine"}),w().sort((t,x)=>(t<c?1:0)-(x<c?1:0)).map(t=>e.jsx(n,{value:t,children:I(t)},t))]})})]}),e.jsxs(a,{container:!0,width:"100%",children:[e.jsx(a,{item:!0,flex:i&&2,width:300,children:e.jsx(s,{fullWidth:!0,label:"Note e Specifiche",value:v,onChange:t=>L(t.target.value)})}),e.jsx(a,{item:!0,width:100,children:e.jsx(s,{fullWidth:!0,type:"number",label:"KM",value:j,onChange:t=>A(t.target.value)})})]}),o&&e.jsx(a,{item:!0,xs:12,children:e.jsx(H,{severity:"error",children:o})}),e.jsxs(a,{container:!0,width:"100%",display:"flex",justifyContent:i?"center":"flex-start",gap:2,flexWrap:"wrap",children:[e.jsx(z,{component:f,to:"/area-personale",variant:"outlined",fullWidth:i,size:"large",children:"Annulla"}),e.jsx(z,{type:"submit",variant:"contained",disabled:l,fullWidth:i,size:"large",children:S?"Salva modifiche":"Aggiungi Lavoro"})]})]})})]})]})}export{_ as default};
