import{n as ie,r as v,R as se,b as ae,j as a,o as oe,T as ce,u as le,a as ue,L as O}from"./index-UwUUR7on.js";import{u as de}from"./CalendarToday-C0RBPGvt.js";import{E as fe}from"./EventDetailsPanel-CZYK0mvY.js";import{v as me,k as V,P as pe,T as G,B}from"./TextField-CrKf4flB.js";import{c as F,s as he,M as b}from"./MenuItem-DvGQJo1-.js";import{t as _,v as ge,c as xe,b as Se,g as ye,s as be,u as ve,B as je}from"./Box-Cacg7jsl.js";import{A as we}from"./Alert-D_w8HAtG.js";function Ce({props:e,name:t,defaultTheme:n,themeId:s}){let r=_(n);return s&&(r=r[s]||r),F({theme:r,name:t,props:e})}function Ge(e,t,n,s,r){const[i,l]=v.useState(()=>r&&n?n(e).matches:s?s(e).matches:t);return ae(()=>{if(!n)return;const u=n(e),d=()=>{l(u.matches)};return d(),u.addEventListener("change",d),()=>{u.removeEventListener("change",d)}},[e,n]),i}const $e={...se},U=$e.useSyncExternalStore;function Ee(e,t,n,s,r){const i=v.useCallback(()=>t,[t]),l=v.useMemo(()=>{if(r&&n)return()=>n(e).matches;if(s!==null){const{matches:c}=s(e);return()=>c}return i},[i,e,s,r,n]),[u,d]=v.useMemo(()=>{if(n===null)return[i,()=>()=>{}];const c=n(e);return[()=>c.matches,f=>(c.addEventListener("change",f),()=>{c.removeEventListener("change",f)})]},[i,n,e]);return U(d,u,l)}function K(e={}){const{themeId:t}=e;return function(s,r={}){let i=ie();i&&t&&(i=i[t]||i);const l=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:u=!1,matchMedia:d=l?window.matchMedia:null,ssrMatchMedia:p=null,noSsr:c=!1}=F({name:"MuiUseMediaQuery",props:r,theme:i});let f=typeof s=="function"?s(i):s;return f=f.replace(/^@media( ?)/m,""),(U!==void 0?Ee:Ge)(f,u,d,p,c)}}K();const ke=(e,t)=>e.filter(n=>t.includes(n)),E=(e,t,n)=>{const s=e.keys[0];Array.isArray(t)?t.forEach((r,i)=>{n((l,u)=>{i<=e.keys.length-1&&(i===0?Object.assign(l,u):l[e.up(e.keys[i])]=u)},r)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:ke(e.keys,Object.keys(t))).forEach(i=>{if(e.keys.includes(i)){const l=t[i];l!==void 0&&n((u,d)=>{s===i?Object.assign(u,d):u[e.up(i)]=d},l)}}):(typeof t=="number"||typeof t=="string")&&n((r,i)=>{Object.assign(r,i)},t)};function z(e){return`--Grid-${e}Spacing`}function T(e){return`--Grid-parent-${e}Spacing`}const D="--Grid-columns",$="--Grid-parent-columns",Pe=({theme:e,ownerState:t})=>{const n={};return E(e.breakpoints,t.size,(s,r)=>{let i={};r==="grow"&&(i={flexBasis:0,flexGrow:1,maxWidth:"100%"}),r==="auto"&&(i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof r=="number"&&(i={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${r} / var(${$}) - (var(${$}) - ${r}) * (var(${T("column")}) / var(${$})))`}),s(n,i)}),n},ze=({theme:e,ownerState:t})=>{const n={};return E(e.breakpoints,t.offset,(s,r)=>{let i={};r==="auto"&&(i={marginLeft:"auto"}),typeof r=="number"&&(i={marginLeft:r===0?"0px":`calc(100% * ${r} / var(${$}) + var(${T("column")}) * ${r} / var(${$}))`}),s(n,i)}),n},Te=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={[D]:12};return E(e.breakpoints,t.columns,(s,r)=>{const i=r??12;s(n,{[D]:i,"> *":{[$]:i}})}),n},Me=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return E(e.breakpoints,t.rowSpacing,(s,r)=>{var l;const i=typeof r=="string"?r:(l=e.spacing)==null?void 0:l.call(e,r);s(n,{[z("row")]:i,"> *":{[T("row")]:i}})}),n},Re=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return E(e.breakpoints,t.columnSpacing,(s,r)=>{var l;const i=typeof r=="string"?r:(l=e.spacing)==null?void 0:l.call(e,r);s(n,{[z("column")]:i,"> *":{[T("column")]:i}})}),n},We=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return E(e.breakpoints,t.direction,(s,r)=>{s(n,{flexDirection:r})}),n},Ne=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${z("row")}) var(${z("column")})`}}),Le=e=>{const t=[];return Object.entries(e).forEach(([n,s])=>{s!==!1&&s!==void 0&&t.push(`grid-${n}-${String(s)}`)}),t},Ae=(e,t="xs")=>{function n(s){return s===void 0?!1:typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"&&s>0}if(n(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const s=[];return Object.entries(e).forEach(([r,i])=>{n(i)&&s.push(`spacing-${r}-${String(i)}`)}),s}return[]},Oe=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,n])=>`direction-${t}-${n}`):[`direction-xs-${String(e)}`];function Be(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(n=>{e[n]!==void 0&&delete e[n]})}const De=oe(),Qe=he("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>t.root});function Ie(e){return Ce({props:e,name:"MuiGrid",defaultTheme:De})}function Ve(e={}){const{createStyledComponent:t=Qe,useThemeProps:n=Ie,useTheme:s=_,componentName:r="MuiGrid"}=e,i=(p,c)=>{const{container:f,direction:h,spacing:g,wrap:m,size:w}=p,k={root:["root",f&&"container",m!=="wrap"&&`wrap-xs-${String(m)}`,...Oe(h),...Le(w),...f?Ae(g,c.breakpoints.keys[0]):[]]};return Se(k,j=>ye(r,j),{})};function l(p,c,f=()=>!0){const h={};return p===null||(Array.isArray(p)?p.forEach((g,m)=>{g!==null&&f(g)&&c.keys[m]&&(h[c.keys[m]]=g)}):typeof p=="object"?Object.keys(p).forEach(g=>{const m=p[g];m!=null&&f(m)&&(h[g]=m)}):h[c.keys[0]]=p),h}const u=t(Te,Re,Me,Pe,We,Ne,ze),d=v.forwardRef(function(c,f){const h=s(),g=n(c),m=ge(g);Be(m,h.breakpoints);const{className:w,children:k,columns:j=12,container:P=!1,component:M="div",direction:x="row",wrap:R="wrap",size:W={},offset:o={},spacing:N=0,rowSpacing:H=N,columnSpacing:J=N,unstable_level:C=0,...X}=m,Y=l(W,h.breakpoints,y=>y!==!1),Z=l(o,h.breakpoints),q=c.columns??(C?void 0:j),ee=c.spacing??(C?void 0:N),te=c.rowSpacing??c.spacing??(C?void 0:H),ne=c.columnSpacing??c.spacing??(C?void 0:J),L={...m,level:C,columns:q,container:P,direction:x,wrap:R,spacing:ee,rowSpacing:te,columnSpacing:ne,size:Y,offset:Z},re=i(L,h);return a.jsx(u,{ref:f,as:M,ownerState:L,className:xe(re.root,w),...X,children:v.Children.map(k,y=>{var A;return v.isValidElement(y)&&me(y,["Grid"])&&P&&y.props.container?v.cloneElement(y,{unstable_level:((A=y.props)==null?void 0:A.unstable_level)??C+1}):y})})});return d.muiName="Grid",d}const S=Ve({createStyledComponent:be("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>ve({props:e,name:"MuiGrid"}),useTheme:V}),Fe=K({themeId:ce});function Q(){const e=[];for(let t=0;t<24;t++)for(let n of[0,30]){const s=t.toString().padStart(2,"0"),r=n.toString().padStart(2,"0");e.push(`${s}:${r}:00`)}return e}function I(e){return e.slice(0,5)}function Ze(){const{submitWorkLog:e,isLoading:t,error:n}=le(),{date:s,worksite:r,setWorksite:i,task:l,setTask:u,startTime:d,setStartTime:p,endTime:c,setEndTime:f,totalHours:h,km:g,setKm:m,notes:w,setNotes:k,editingRow:j,cancelEditing:P}=de(),M=V(),x=Fe(M.breakpoints.down("sm")),R=ue();function W(o){o.preventDefault(),e({date:s,worksite:r,task:l,startTime:d,endTime:c,totalHours:h,km:g,notes:w,editingRow:j}),R(`/area-personale/scheda-lavoro?data=${s}`),P()}return a.jsxs(a.Fragment,{children:[a.jsx(je,{sx:{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",backgroundColor:"#0000009a",alignContent:"center"},component:O,to:"/area-personale"}),a.jsxs(pe,{sx:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%,-50%)",p:x?2:3,maxWidth:700,width:x?"95%":"100%"},children:[a.jsx(fe,{}),a.jsx("form",{onSubmit:W,children:a.jsxs(S,{container:!0,spacing:x?2:3,children:[a.jsxs(S,{container:!0,width:"100%",children:[a.jsx(S,{item:!0,width:x?"100%":200,children:a.jsxs(G,{fullWidth:!0,select:!0,label:"Cantiere",value:r,onChange:o=>i(o.target.value),required:!0,children:[a.jsx(b,{value:"",children:"Seleziona Cantiere"}),["Rivazzurra","San Giuliano","Viserba","Torre Pedrera","Miramare Naturale","Spadarolo","Miramare Sintetico","Ina Casa","Viserbella","San Vito","Rivabella","Palazzetto","Stadio","Varie + Gestione","Altri Impianti + Extra","Servizi a Pagamento","Sede Coop134"].map(o=>a.jsx(b,{value:o,children:o},o))]})}),a.jsx(S,{item:!0,flex:x&&1,width:x?"100%":200,children:a.jsxs(G,{fullWidth:!0,select:!0,label:"Lavoro",value:l,onChange:o=>u(o.target.value),required:!0,children:[a.jsx(b,{value:"",children:"Seleziona Lavoro"}),["Custodia","Pulizia Spogliatoi","Custodia Partita","Pulizia Altro","Innaffiatura","Rigatura","Rigatura Extra","Sfalcio CP","Sfalcio CP+CS","Sfalcio CS","Sfalcio AE","Sfalcio Generale","Sabbia","Rullatura","Giri Vari","Lavoro PC","Altre Manutenzioni","Sanificazione","Miglioria","Lavoro a Preventivo:","Corso","Visita Medica","Riunione"].map(o=>a.jsx(b,{value:o,children:o},o))]})})]}),a.jsxs(S,{container:!0,sx:{width:"100%"},children:[a.jsx(S,{item:!0,flex:x&&1,width:120,children:a.jsxs(G,{fullWidth:!0,select:!0,label:"Orario Inizio",value:d,onChange:o=>p(o.target.value),required:!0,children:[a.jsx(b,{value:"",children:"Seleziona Inizio"}),Q().map(o=>a.jsx(b,{value:o,children:I(o)},o))]})}),a.jsx(S,{item:!0,flex:x&&1,width:120,children:a.jsxs(G,{fullWidth:!0,select:!0,label:"Orario Fine",value:c,onChange:o=>f(o.target.value),required:!0,children:[a.jsx(b,{value:"",children:"Seleziona Fine"}),Q().map(o=>a.jsx(b,{value:o,children:I(o)},o))]})})]}),a.jsxs(S,{container:!0,width:"100%",children:[a.jsx(S,{item:!0,flex:x&&2,width:300,children:a.jsx(G,{fullWidth:!0,label:"Note e Specifiche",value:w,onChange:o=>k(o.target.value)})}),a.jsx(S,{item:!0,width:100,children:a.jsx(G,{fullWidth:!0,type:"number",label:"KM",value:g,onChange:o=>m(o.target.value)})})]}),n&&a.jsx(S,{item:!0,xs:12,children:a.jsx(we,{severity:"error",children:n})}),a.jsxs(S,{container:!0,width:"100%",display:"flex",justifyContent:x?"center":"flex-start",gap:2,flexWrap:"wrap",children:[j&&a.jsx(B,{component:O,to:"/area-personale",variant:"outlined",fullWidth:x,children:"Annulla"}),a.jsx(B,{type:"submit",variant:"contained",disabled:t,fullWidth:x,children:j?"Salva modifiche":"Aggiungi"})]})]})})]})]})}export{Ze as default};
