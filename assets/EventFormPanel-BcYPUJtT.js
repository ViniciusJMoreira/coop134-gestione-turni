import{j as e,B as c,m as R,aC as G,I as V,aD as q,q as F,G as S,P as O,aE as r,d as s,X as o,A as B,e as C}from"./vendor-ui-CdS3g7Hs.js";import{u as N}from"./index-OgNTIENe.js";import{u as w}from"./ActivityProvider-miMd1G6h.js";import{L as h,u as K}from"./vendor-react-BZMvSTjs.js";function $(a){const i=new Date(a);return{0:"Domenica",1:"Lunedì",2:"Martedì",3:"Mercoledì",4:"Giovedì",5:"Venerdì",6:"Sabato"}[i.getDay()]}function H(a){const i=new Date(a),l={month:"short",day:"numeric",year:"numeric"};return i.toLocaleDateString("it-IT",l)}function Q({children:a}){const{date:i}=w();return e.jsxs(c,{component:"section",children:[e.jsxs(c,{component:"nav",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(R,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(G,{fontSize:"small"}),$(i),", ",H(i)]}),e.jsx(V,{component:h,to:"/area-personale","aria-label":"Chiudi",color:"error",children:e.jsx(q,{})})]}),a]})}function b(){const a=[];for(let i=0;i<24;i++)for(let l of[0,30]){const d=i.toString().padStart(2,"0"),u=l.toString().padStart(2,"0");a.push(`${d}:${u}:00`)}return a}function z(a){return a.slice(0,5)}function Z(){const{submitWorkLog:a,isLoading:i,error:l}=N(),{date:d,worksite:u,setWorksite:y,task:m,setTask:I,startTime:x,setStartTime:P,endTime:f,setEndTime:M,totalHours:T,km:g,setKm:W,notes:p,setNotes:k,editingRow:j,cancelEditing:L}=w(),v=F(),A=S(v.breakpoints.down("md")),n=S(v.breakpoints.down("sm")),D=K();function E(t){t.preventDefault(),a({date:d,worksite:u,task:m,startTime:x,endTime:f,totalHours:T,km:g,notes:p,editingRow:j}),D("/area-personale"),L()}return e.jsxs(e.Fragment,{children:[e.jsx(c,{sx:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"#0000009a",alignContent:"center",zIndex:10},component:h,to:"/area-personale"}),e.jsxs(O,{sx:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%,-50%)",margin:"0 auto",p:n?2:3,maxWidth:700,width:A?"95%":"100%",zIndex:100},children:[e.jsx(Q,{}),e.jsx("form",{onSubmit:E,children:e.jsxs(r,{container:!0,spacing:n?2:3,children:[e.jsxs(r,{container:!0,width:"100%",children:[e.jsx(r,{item:!0,width:n?"100%":200,children:e.jsxs(s,{fullWidth:!0,select:!0,label:"Cantiere",value:u,onChange:t=>y(t.target.value),required:!0,children:[e.jsx(o,{value:"",children:"Seleziona Cantiere"}),["Rivazzurra","San Giuliano","Viserba","Torre Pedrera","Miramare Naturale","Spadarolo","Miramare Sintetico","Ina Casa","Viserbella","San Vito","Corpolò","Rivabella","Palazzetto","Stadio","Varie + Gestione","Altri Impianti + Extra","Servizi a Pagamento","Sede Coop134"].map(t=>e.jsx(o,{value:t,children:t},t))]})}),e.jsx(r,{item:!0,flex:n&&1,width:n?"100%":200,children:e.jsxs(s,{fullWidth:!0,select:!0,label:"Lavoro",value:m,onChange:t=>I(t.target.value),required:!0,children:[e.jsx(o,{value:"",children:"Seleziona Lavoro"}),["Custodia","Pulizia Spogliatoi","Custodia Partita","Pulizia Altro","Innaffiatura","Rigatura","Rigatura Extra","Sfalcio CP","Sfalcio CP+CS","Sfalcio CS","Sfalcio AE","Sfalcio Generale","Sabbia","Rullatura","Giri Vari","Lavoro PC","Altre Manutenzioni","Sanificazione","Miglioria","Lavoro a Preventivo:","Corso","Visita Medica","Riunione"].map(t=>e.jsx(o,{value:t,children:t},t))]})})]}),e.jsxs(r,{container:!0,sx:{width:"100%"},children:[e.jsx(r,{item:!0,flex:n&&1,width:150,children:e.jsxs(s,{fullWidth:!0,select:!0,label:"Orario Inizio",value:x,onChange:t=>P(t.target.value),required:!0,children:[e.jsx(o,{value:"",children:"Seleziona Inizio"}),b().map(t=>e.jsx(o,{value:t,children:z(t)},t))]})}),e.jsx(r,{item:!0,flex:n&&1,width:150,children:e.jsxs(s,{fullWidth:!0,select:!0,label:"Orario Fine",value:f,onChange:t=>M(t.target.value),required:!0,children:[e.jsx(o,{value:"",children:"Seleziona Fine"}),b().map(t=>e.jsx(o,{value:t,children:z(t)},t))]})})]}),e.jsxs(r,{container:!0,width:"100%",children:[e.jsx(r,{item:!0,flex:n&&2,width:300,children:e.jsx(s,{fullWidth:!0,label:"Note e Specifiche",value:p,onChange:t=>k(t.target.value)})}),e.jsx(r,{item:!0,width:100,children:e.jsx(s,{fullWidth:!0,type:"number",label:"KM",value:g,onChange:t=>W(t.target.value)})})]}),l&&e.jsx(r,{item:!0,xs:12,children:e.jsx(B,{severity:"error",children:l})}),e.jsxs(r,{container:!0,width:"100%",display:"flex",justifyContent:n?"center":"flex-start",gap:2,flexWrap:"wrap",children:[e.jsx(C,{component:h,to:"/area-personale",variant:"outlined",fullWidth:n,size:"large",children:"Annulla"}),e.jsx(C,{type:"submit",variant:"contained",disabled:i,fullWidth:n,size:"large",children:j?"Salva modifiche":"Aggiungi Lavoro"})]})]})})]})]})}export{Z as default};
