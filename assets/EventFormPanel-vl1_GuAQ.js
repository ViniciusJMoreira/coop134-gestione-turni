import{r as P,j as i,n as ee,u as te,a as re,L}from"./index-CkgxHkkw.js";import{u as ne}from"./ActivityProvider-C4QzZvuJ.js";import{E as ie}from"./EventDetailsPanel-BpiOp8MX.js";import{n as se,q,P as ae,T as C,B}from"./TextField-CymuRU8B.js";import{s as oe,u as le,c as ce,M as j}from"./index-CmJQs0KJ.js";import{y as ue,z as de,e as fe,f as me,g as pe,s as ge,u as he,B as xe}from"./Box-jjIil4aI.js";import{A as Se}from"./Alert--rZm06IT.js";const ye=(e,t)=>e.filter(r=>t.includes(r)),$=(e,t,r)=>{const a=e.keys[0];Array.isArray(t)?t.forEach((n,s)=>{r((l,h)=>{s<=e.keys.length-1&&(s===0?Object.assign(l,h):l[e.up(e.keys[s])]=h)},n)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:ye(e.keys,Object.keys(t))).forEach(s=>{if(e.keys.includes(s)){const l=t[s];l!==void 0&&r((h,S)=>{a===s?Object.assign(h,S):h[e.up(s)]=S},l)}}):(typeof t=="number"||typeof t=="string")&&r((n,s)=>{Object.assign(n,s)},t)};function T(e){return`--Grid-${e}Spacing`}function E(e){return`--Grid-parent-${e}Spacing`}const D="--Grid-columns",G="--Grid-parent-columns",je=({theme:e,ownerState:t})=>{const r={};return $(e.breakpoints,t.size,(a,n)=>{let s={};n==="grow"&&(s={flexBasis:0,flexGrow:1,maxWidth:"100%"}),n==="auto"&&(s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof n=="number"&&(s={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${n} / var(${G}) - (var(${G}) - ${n}) * (var(${E("column")}) / var(${G})))`}),a(r,s)}),r},be=({theme:e,ownerState:t})=>{const r={};return $(e.breakpoints,t.offset,(a,n)=>{let s={};n==="auto"&&(s={marginLeft:"auto"}),typeof n=="number"&&(s={marginLeft:n===0?"0px":`calc(100% * ${n} / var(${G}) + var(${E("column")}) * ${n} / var(${G}))`}),a(r,s)}),r},ve=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={[D]:12};return $(e.breakpoints,t.columns,(a,n)=>{const s=n??12;a(r,{[D]:s,"> *":{[G]:s}})}),r},we=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return $(e.breakpoints,t.rowSpacing,(a,n)=>{var l;const s=typeof n=="string"?n:(l=e.spacing)==null?void 0:l.call(e,n);a(r,{[T("row")]:s,"> *":{[E("row")]:s}})}),r},Ce=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return $(e.breakpoints,t.columnSpacing,(a,n)=>{var l;const s=typeof n=="string"?n:(l=e.spacing)==null?void 0:l.call(e,n);a(r,{[T("column")]:s,"> *":{[E("column")]:s}})}),r},Ge=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return $(e.breakpoints,t.direction,(a,n)=>{a(r,{flexDirection:n})}),r},$e=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${T("row")}) var(${T("column")})`}}),ze=e=>{const t=[];return Object.entries(e).forEach(([r,a])=>{a!==!1&&a!==void 0&&t.push(`grid-${r}-${String(a)}`)}),t},ke=(e,t="xs")=>{function r(a){return a===void 0?!1:typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number"&&a>0}if(r(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const a=[];return Object.entries(e).forEach(([n,s])=>{r(s)&&a.push(`spacing-${n}-${String(s)}`)}),a}return[]},Pe=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,r])=>`direction-${t}-${r}`):[`direction-xs-${String(e)}`];function Te(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(r=>{e[r]!==void 0&&delete e[r]})}const Ee=ee(),Me=oe("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>t.root});function We(e){return le({props:e,name:"MuiGrid",defaultTheme:Ee})}function Ne(e={}){const{createStyledComponent:t=Me,useThemeProps:r=We,useTheme:a=ue,componentName:n="MuiGrid"}=e,s=(p,c)=>{const{container:x,direction:d,spacing:m,wrap:u,size:b}=p,z={root:["root",x&&"container",u!=="wrap"&&`wrap-xs-${String(u)}`,...Pe(d),...ze(b),...x?ke(m,c.breakpoints.keys[0]):[]]};return me(z,v=>pe(n,v),{})};function l(p,c,x=()=>!0){const d={};return p===null||(Array.isArray(p)?p.forEach((m,u)=>{m!==null&&x(m)&&c.keys[u]&&(d[c.keys[u]]=m)}):typeof p=="object"?Object.keys(p).forEach(m=>{const u=p[m];u!=null&&x(u)&&(d[m]=u)}):d[c.keys[0]]=p),d}const h=t(ve,Ce,we,je,Ge,$e,be),S=P.forwardRef(function(c,x){const d=a(),m=r(c),u=de(m);Te(u,d.breakpoints);const{className:b,children:z,columns:v=12,container:k=!1,component:M="div",direction:f="row",wrap:W="wrap",size:N={},offset:o={},spacing:A=0,rowSpacing:F=A,columnSpacing:K=A,unstable_level:w=0,..._}=u,H=l(N,d.breakpoints,y=>y!==!1),Q=l(o,d.breakpoints),U=c.columns??(w?void 0:v),J=c.spacing??(w?void 0:A),X=c.rowSpacing??c.spacing??(w?void 0:F),Y=c.columnSpacing??c.spacing??(w?void 0:K),R={...u,level:w,columns:U,container:k,direction:f,wrap:W,spacing:J,rowSpacing:X,columnSpacing:Y,size:H,offset:Q},Z=s(R,d);return i.jsx(h,{ref:x,as:M,ownerState:R,className:fe(Z.root,b),..._,children:P.Children.map(z,y=>{var O;return P.isValidElement(y)&&se(y,["Grid"])&&k&&y.props.container?P.cloneElement(y,{unstable_level:((O=y.props)==null?void 0:O.unstable_level)??w+1}):y})})});return S.muiName="Grid",S}const g=Ne({createStyledComponent:ge("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>he({props:e,name:"MuiGrid"}),useTheme:q});function I(){const e=[];for(let t=0;t<24;t++)for(let r of[0,30]){const a=t.toString().padStart(2,"0"),n=r.toString().padStart(2,"0");e.push(`${a}:${n}:00`)}return e}function V(e){return e.slice(0,5)}function Ve(){const{submitWorkLog:e,isLoading:t,error:r}=te(),{date:a,worksite:n,setWorksite:s,task:l,setTask:h,startTime:S,setStartTime:p,endTime:c,setEndTime:x,totalHours:d,km:m,setKm:u,notes:b,setNotes:z,editingRow:v,cancelEditing:k}=ne(),M=q(),f=ce(M.breakpoints.down("sm")),W=re();function N(o){o.preventDefault(),e({date:a,worksite:n,task:l,startTime:S,endTime:c,totalHours:d,km:m,notes:b,editingRow:v}),W("/area-personale"),k()}return i.jsxs(i.Fragment,{children:[i.jsx(xe,{sx:{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",backgroundColor:"#0000009a",alignContent:"center"},component:L,to:"/area-personale"}),i.jsxs(ae,{sx:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%,-50%)",p:f?2:3,maxWidth:700,width:f?"95%":"100%"},children:[i.jsx(ie,{}),i.jsx("form",{onSubmit:N,children:i.jsxs(g,{container:!0,spacing:f?2:3,children:[i.jsxs(g,{container:!0,width:"100%",children:[i.jsx(g,{item:!0,width:f?"100%":200,children:i.jsxs(C,{fullWidth:!0,select:!0,label:"Cantiere",value:n,onChange:o=>s(o.target.value),required:!0,children:[i.jsx(j,{value:"",children:"Seleziona Cantiere"}),["Rivazzurra","San Giuliano","Viserba","Torre Pedrera","Miramare Naturale","Spadarolo","Miramare Sintetico","Ina Casa","Viserbella","San Vito","Rivabella","Palazzetto","Stadio","Varie + Gestione","Altri Impianti + Extra","Servizi a Pagamento","Sede Coop134"].map(o=>i.jsx(j,{value:o,children:o},o))]})}),i.jsx(g,{item:!0,flex:f&&1,width:f?"100%":200,children:i.jsxs(C,{fullWidth:!0,select:!0,label:"Lavoro",value:l,onChange:o=>h(o.target.value),required:!0,children:[i.jsx(j,{value:"",children:"Seleziona Lavoro"}),["Custodia","Pulizia Spogliatoi","Custodia Partita","Pulizia Altro","Innaffiatura","Rigatura","Rigatura Extra","Sfalcio CP","Sfalcio CP+CS","Sfalcio CS","Sfalcio AE","Sfalcio Generale","Sabbia","Rullatura","Giri Vari","Lavoro PC","Altre Manutenzioni","Sanificazione","Miglioria","Lavoro a Preventivo:","Corso","Visita Medica","Riunione"].map(o=>i.jsx(j,{value:o,children:o},o))]})})]}),i.jsxs(g,{container:!0,sx:{width:"100%"},children:[i.jsx(g,{item:!0,flex:f&&1,width:120,children:i.jsxs(C,{fullWidth:!0,select:!0,label:"Orario Inizio",value:S,onChange:o=>p(o.target.value),required:!0,children:[i.jsx(j,{value:"",children:"Seleziona Inizio"}),I().map(o=>i.jsx(j,{value:o,children:V(o)},o))]})}),i.jsx(g,{item:!0,flex:f&&1,width:120,children:i.jsxs(C,{fullWidth:!0,select:!0,label:"Orario Fine",value:c,onChange:o=>x(o.target.value),required:!0,children:[i.jsx(j,{value:"",children:"Seleziona Fine"}),I().map(o=>i.jsx(j,{value:o,children:V(o)},o))]})})]}),i.jsxs(g,{container:!0,width:"100%",children:[i.jsx(g,{item:!0,flex:f&&2,width:300,children:i.jsx(C,{fullWidth:!0,label:"Note e Specifiche",value:b,onChange:o=>z(o.target.value)})}),i.jsx(g,{item:!0,width:100,children:i.jsx(C,{fullWidth:!0,type:"number",label:"KM",value:m,onChange:o=>u(o.target.value)})})]}),r&&i.jsx(g,{item:!0,xs:12,children:i.jsx(Se,{severity:"error",children:r})}),i.jsxs(g,{container:!0,width:"100%",display:"flex",justifyContent:f?"center":"flex-start",gap:2,flexWrap:"wrap",children:[i.jsx(B,{component:L,to:"/area-personale",variant:"outlined",fullWidth:f,size:"large",children:"Annulla"}),i.jsx(B,{type:"submit",variant:"contained",disabled:t,fullWidth:f,size:"large",children:v?"Salva modifiche":"Aggiungi"})]})]})})]})]})}export{Ve as default};
