import{j as e,B as m,m as F,aH as B,I as N,aI as O,q as D,G as z,P as K,aJ as t,d as o,X as n,A as $,e as w}from"./vendor-ui-ifLq-YzB.js";import{u as P}from"./index-Bl8adHt-.js";import{u as k,g as H,a as J}from"./convertDate-DZuC9TJM.js";import{L as f,u as Q}from"./vendor-react-Bmf8nP68.js";function X({children:r}){const{date:l}=k(),{clearError:s}=P();return e.jsxs(m,{component:"section",children:[e.jsxs(m,{component:"nav",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(F,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(B,{fontSize:"small"}),H(l)]}),e.jsx(N,{component:f,onClick:s,to:"/area-personale","aria-label":"Chiudi",color:"error",children:e.jsx(O,{})})]}),r]})}function I(){const r=[];for(let l=0;l<24;l++)for(let s of[0,30]){const u=l.toString().padStart(2,"0"),h=s.toString().padStart(2,"0");r.push(`${u}:${h}:00`)}return r}function y(r){return r.slice(0,5)}function ee(){const{submitWorkLog:r,isLoading:l,error:s,clearError:u}=P(),{date:h,worksite:p,setWorksite:T,task:g,setTask:W,startTime:d,setStartTime:M,endTime:j,setEndTime:A,km:v,setKm:E,notes:S,setNotes:L,editingRow:C,cancelEditing:R}=k(),b=D(),G=z(b.breakpoints.down("md")),i=z(b.breakpoints.down("sm")),V=Q(),c=d||"06:00:00";function q(a){a.preventDefault(),r({date:J(h),worksite:p,task:g,startTime:d,endTime:j,km:v,notes:S,editingRow:C}),V("/area-personale"),R()}return e.jsxs(e.Fragment,{children:[e.jsx(m,{sx:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"#0000009a",alignContent:"center",zIndex:10},component:f,onClick:u,to:"/area-personale"}),e.jsxs(K,{sx:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%,-50%)",margin:"0 auto",p:i?2:3,maxWidth:700,width:G?"95%":"100%",zIndex:100},children:[e.jsx(X,{}),e.jsx("form",{onSubmit:q,children:e.jsxs(t,{container:!0,spacing:i?2:3,children:[e.jsxs(t,{container:!0,width:"100%",children:[e.jsx(t,{width:i?"100%":200,children:e.jsxs(o,{fullWidth:!0,select:!0,label:"Cantiere",value:p,onChange:a=>T(a.target.value),required:!0,children:[e.jsx(n,{value:"",children:"Seleziona Cantiere"}),["Rivazzurra","San Giuliano","Viserba","Torre Pedrera","Miramare Naturale","Spadarolo","Miramare Sintetico","Ina Casa","Viserbella","San Vito","Rivabella","Palazzetto","Stadio","Varie + Gestione","Altri Impianti + Extra","Servizi a Pagamento","Sede Coop134"].map(a=>e.jsx(n,{value:a,children:a},a))]})}),e.jsx(t,{flex:i&&1,width:i?"100%":200,children:e.jsxs(o,{fullWidth:!0,select:!0,label:"Lavoro",value:g,onChange:a=>W(a.target.value),required:!0,children:[e.jsx(n,{value:"",children:"Seleziona Lavoro"}),["Custodia","Pulizia Spogliatoi","Custodia Partita","Pulizia Altro","Innaffiatura","Rigatura","Rigatura Extra","Sfalcio CP","Sfalcio CP+CS","Sfalcio CS","Sfalcio AE","Sfalcio Generale","Sabbia","Rullatura","Giri Vari","Lavoro PC","Altre Manutenzioni","Sanificazione","Miglioria","Lavoro a Preventivo:","Corso","Visita Medica","Riunione"].map(a=>e.jsx(n,{value:a,children:a},a))]})})]}),e.jsxs(t,{container:!0,sx:{width:"100%"},children:[e.jsx(t,{flex:i&&1,width:150,children:e.jsxs(o,{fullWidth:!0,select:!0,label:"Orario Inizio",value:d,onChange:a=>M(a.target.value),required:!0,children:[e.jsx(n,{value:"",children:"Seleziona Inizio"}),I().sort((a,x)=>(a<c?1:0)-(x<c?1:0)).map(a=>e.jsx(n,{value:a,children:y(a)},a))]})}),e.jsx(t,{flex:i&&1,width:150,children:e.jsxs(o,{fullWidth:!0,select:!0,label:"Orario Fine",value:j,onChange:a=>A(a.target.value),required:!0,children:[e.jsx(n,{value:"",children:"Seleziona Fine"}),I().sort((a,x)=>(a<c?1:0)-(x<c?1:0)).map(a=>e.jsx(n,{value:a,children:y(a)},a))]})})]}),e.jsxs(t,{container:!0,width:"100%",children:[e.jsx(t,{flex:i&&2,width:300,children:e.jsx(o,{fullWidth:!0,label:"Note e Specifiche",value:S,onChange:a=>L(a.target.value)})}),e.jsx(t,{width:100,children:e.jsx(o,{fullWidth:!0,type:"number",label:"KM",value:v,onChange:a=>E(a.target.value)})})]}),s&&e.jsx(t,{container:!0,children:e.jsx($,{severity:"error",children:s})}),e.jsxs(t,{container:!0,width:"100%",display:"flex",justifyContent:i?"center":"flex-start",gap:2,flexWrap:"wrap",children:[e.jsx(w,{component:f,onClick:u,to:"/area-personale",variant:"outlined",fullWidth:i,size:"large",children:"Annulla"}),e.jsx(w,{type:"submit",variant:"contained",disabled:l,fullWidth:i,size:"large",children:C?"Salva modifiche":"Aggiungi Lavoro"})]})]})})]})]})}export{ee as default};
